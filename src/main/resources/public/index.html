<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Drool Rule Maker</title>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.5/angular-messages.min.js"></script>
<script src="./js/rule.js"></script>
<script src="./js/ruleService.js"></script>
<script src="./js/ruleController.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
</head>
<body data-ng-app="rule">

	<div data-ng-app="rule" data-ng-controller="ruleController">
		<table>
			<thead>
				<tr>
					<td align="center">Matching Criteria</td>
				</tr>
			</thead>
			<tbody>
				<tr data-ng-repeat="field in model.data[0].criteria.fields track by $index">
					<td><input type="text" value="{{field.name}}" data-ng-model="field.name"
						data-ng-readonly='!($index == editName)' data-ng-dblclick="editName = $index" /></td>
					<td><select data-ng-model="field.condition">
							<option data-ng-selected="{{field.condition}}" data-ng-repeat="c in model.conditions">{{c}}</option>
					</select></td>
					<!-- 					<td><input type="text" value="{{field.condition}}" data-ng-model="field.condition"
						data-ng-readonly='!($index == editCondition)' data-ng-dblclick="editCondition = $index" /></td> -->
					<td><input type="text" value="{{field.value}}" data-ng-model="field.value"
						data-ng-readonly='!($index == editValue)' data-ng-dblclick="editValue = $index" /></td>
					<td><button class="btn-primary btn-xs delete" data-ng-click="deleteField(model.data[0].criteria, $index)">Delete</button></td>
					<td><button class="btn-primary btn-xs add" data-ng-click="addField(model.data[0].criteria, $index)"
							data-ng-show="$last">Add</button></td>
				</tr>
				<tr>
					<td>
						<button class="btn-primary btn-xs add" data-ng-click="saveCriteria(model.data[0].criteria)">Save Data</button>
					</td>
				</tr>
			</tbody>
		</table>

		<script type="text/ng-template" id="display">
        <td>{{field.name}}</td>
        <td>{{field.value}}</td>
        <td>
            <button data-ng-click="editField(field)">Edit</button>
        </td>
    </script>
		<script type="text/ng-template" id="edit">
        <td><input type="text" data-ng-model="model.selected.name" /></td>
        <td><input type="text" data-ng-model="model.selected.value" /></td>
        <td>
            <button data-ng-click="saveField($index)">Save</button>
            <button data-ng-click="reset()">Cancel</button>
        </td>
    </script>
	</div>

</body>
</html>